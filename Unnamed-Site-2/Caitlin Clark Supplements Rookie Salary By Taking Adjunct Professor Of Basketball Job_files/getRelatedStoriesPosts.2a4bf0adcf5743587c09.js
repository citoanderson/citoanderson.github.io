(window.webpackJsonp=window.webpackJsonp||[]).push([["getRelatedStoriesPosts","api-video-meta","modify-commerce-links","newspicks","userState"],{"+Vbj":function(e,t,r){var s=r("jgJv"),a=r("lYsT"),n=r("PqlX"),o=s?s.isConcatSpreadable:void 0;e.exports=function(e){return n(e)||a(e)||!!(o&&e&&e[o])}},"/Qyy":function(e,t,r){var s=r("dIZa"),a=r("SyCk"),n=r("q+I6"),o=r("9aUh");e.exports=function(e,t,r){if(!o(r))return!1;var i=typeof t;return!!("number"==i?a(r)&&n(t,r.length):"string"==i&&t in r)&&s(r[t],e)}},"/RfE":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_RETURNED=void 0;t.DEFAULT_RETURNED=20;class s{constructor(e={}){this.page=e.page,this.startIndex=e.startIndex,this.startTime=e.startTime,this.refId=e.refId,this.maxReturned=e.maxReturned}static fromQueryString(e={},t=20,r=0){const a=new s;return a.page=Number(e.page)||void 0,a.startIndex=Number(e.startIndex)||void 0,a.startTime=Number(e.startTime)||void 0,a.refId=Number(e.refId)||void 0,a.maxReturned=Number(e.maxReturned)||t+r,a}static fromJSON(e){return new s(e)}toJSON(){return{page:this.page?this.page:void 0,startIndex:this.startIndex?this.startIndex:void 0,startTime:this.startTime?this.startTime:void 0,refId:this.refId?this.refId:void 0,maxReturned:this.maxReturned?this.maxReturned:void 0}}pageNumber(){if(this.startTime)return;const e=this.startIndex||0,t=this.maxReturned||20;return e%t==0?e/t+1:void 0}}t.default=s},"6YMu":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRelatedStoriesPosts=void 0;var s=r("vGmL"),a=u(r("pVVg")),n=u(r("RYvd")),o=r("9YsU"),i=r("OYmB");function u(e){return e&&e.__esModule?e:{default:e}}const{features:l,post:d,refinitivTags:c}=o.renderData;t.getRelatedStoriesPosts=({postId:e,language:t,maxReturned:r=10,usePlaylist:o,withVeritas:u=!0,withContext:f=!0})=>{const h=(0,i.getVeritasId)(),v=d&&d.relatedModule,p=u&&h?(0,s.getInfo)(h).catch((()=>null)):Promise.resolve(null);return n.default?p.then((s=>{var i;const u=null==s||null===(i=s.interests)||void 0===i?void 0:i.tags;return(0,a.default)({postId:e,veritasTags:u,refinitivTags:f?c:null,relatedModule:v,blog:n.default,language:t,maxPosts:r,usePlaylist:o,features:l}).then((({posts:e})=>e))})):Promise.resolve([])}},DKNM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortByNumberExtract=void 0;t.sortByNumberExtract=e=>(t,r)=>(e(r)||0)-(e(t)||0)},IqJI:function(e,t,r){var s=r("gwRl"),a=r("+Vbj");e.exports=function e(t,r,n,o,i){var u=-1,l=t.length;for(n||(n=a),i||(i=[]);++u<l;){var d=t[u];r>0&&n(d)?r>1?e(d,r-1,n,o,i):s(i,d):o||(i[i.length]=d)}return i}},JxOK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRecentPostIds=t.default=void 0;var s=n(r("QFYQ")),a=(n(r("tnQC")),n(r("OAzy")),r("OQvK"));function n(e){return e&&e.__esModule?e:{default:e}}const o=({blogId:e,language:t,maxReturned:r=25,startTime:n=null,requireHeadline:o=!0,hideFromRecirc:i=!1,hideFromRss:u=!1,hideExternal:l=!0,hideSource:d="",excludeAuthor:c=""})=>({blogId:e,maxReturned:r,query:(0,s.default)([(0,a.postSearchSort)("newest"),t&&`language:${t}`,n&&`before:${n}`,o&&(0,a.postSearchHasClause)("noheadline",!1),i&&(0,a.postSearchIsClause)("hidefromrecirc",!1),u&&(0,a.postSearchIsClause)("hidefromrss",!1),l&&(0,a.postSearchIsClause)("usesexternaldata",!1),d&&`not:externalsource:${d}`,c&&`not:author:${c}`]).join(" ")});t.getRecentPostIds=e=>(0,a.postIdSearch)(o(e));var i=e=>(0,a.postSearch)(o(e));t.default=i},LF0y:function(e,t,r){var s=r("UzdM");e.exports=function(e){var t=s(e),r=t%1;return t==t?r?t-r:t:0}},NBZd:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(r("f8ne")),a=o(r("Oyao")),n=o(r("tsyB"));function o(e){return e&&e.__esModule?e:{default:e}}const i={error:{code:"DUMMY_TOKEN_ERROR",message:"Token returned was a dummy token",uid:""}},u={credentials:"include"},l=e=>()=>Promise.resolve(e),d=()=>Promise.resolve(a.default.get("KinjaToken")||"");var c={asGetter:l,asKinjaTokenGetter:e=>()=>Promise.resolve({type:"USER_TOKEN",value:e}),existing:d,fresh:()=>(0,n.default)(`${s.default.api.profileSessionUrl}token/create`,{},u).then((e=>e.token)),get:(e=d,t)=>e().then((e=>{if(t&&-1!==e.indexOf("dummy-"))throw new Error(i);return e})),newspicksFresh:()=>(0,n.default)(`${s.default.api.profileUrl}token/create`,{},u).then((e=>e.token)),toKinjaTokenGetter:e=>()=>e().then((e=>({type:"USER_TOKEN",value:e}))),toUserTokenGetter:e=>e().then((e=>{if("USER_TOKEN"!==e.type)throw new Error(`Unsupported token type - ${e.type}`);return l(e.value)}))};t.default=c,e.exports=t.default},QFYQ:function(e,t){e.exports=function(e){for(var t=-1,r=null==e?0:e.length,s=0,a=[];++t<r;){var n=e[t];n&&(a[s++]=n)}return a}},UnPy:function(e,t){e.exports=function(e,t,r){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var n=Array(a);++s<a;)n[s]=e[s+t];return n}},UzdM:function(e,t,r){var s=r("j6ZD"),a=1/0,n=17976931348623157e292;e.exports=function(e){return e?(e=s(e))===a||e===-a?(e<0?-1:1)*n:e==e?e:0:0===e?e:0}},ZjZ4:function(e,t,r){var s=r("IqJI");e.exports=function(e){return(null==e?0:e.length)?s(e,1):[]}},ehbF:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e){return Promise.all(Object.values(e)).then((t=>Object.keys(e).reduce(((e,r,s)=>Object.assign(e,{[r]:t[s]})),{})))};t.default=s,e.exports=t.default},kMn2:function(e,t,r){var s=r("UnPy"),a=r("/Qyy"),n=r("LF0y"),o=Math.ceil,i=Math.max;e.exports=function(e,t,r){t=(r?a(e,t,r):void 0===t)?1:i(n(t),0);var u=null==e?0:e.length;if(!u||t<1)return[];for(var l=0,d=0,c=Array(o(u/t));l<u;)c[d++]=s(e,l,l+=t);return c}},pVVg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;c(r("2pqj"));var s=r("lI4E"),a=(c(r("OAzy")),c(r("zjNK")),r("wxvn")),n=c(r("ehbF")),o=r("2m1d"),i=c(r("JxOK")),u=r("9B7T"),l=r("jrG2"),d=r("9YsU");function c(e){return e&&e.__esModule?e:{default:e}}t.default=async({postId:e,refinitivTags:t,veritasTags:r,relatedModule:c,blog:f,language:h,maxPosts:v=3,maxVideos:p=5,usePlaylist:m,features:g})=>{const x=c&&c.posts&&c.posts[0]&&c.posts[0].id?(0,s.createPostId)(c.posts[0].id):null,y=t=>t.id!==e&&!t.isQuartzEmail,P=x?(0,a.getPost)(x).catch((()=>null)):Promise.resolve(null),R=t||r?((e,t,r,s)=>{const n=r?(0,u.prepareRefinitivTags)(r).slice(0,5).map((({name:e})=>e)):[],o=t?(0,u.prepareVeritasTags)(t).slice(0,5).map((({name:e})=>e)):[],i=n.concat(o);return(0,a.getRelatedStoriesByTags)({blogId:e,tags:i,language:s,maxReturned:20})})(f.id,r,t,h).then(a.getPosts).then((e=>e.filter((e=>(0,o.filterForRecirc)(e))).filter(y))):Promise.resolve([]),b=()=>(0,i.default)({blogId:f.id,maxReturned:10,requireHeadline:!0,hideFromRecirc:!0}).then((({items:e})=>e.filter(y))),I=t?Promise.resolve(null):b(),{categorizationData:O}=d.renderData,_=(0,l.getPageVideos)({usePlaylist:m,refinitivTags:t,blog:f,categorizationData:O,numberOfVideos:p,features:g});return(0,n.default)({relatedPosts:R,includePost:P,fallbackPostsResolved:I,videos:_}).then((async({relatedPosts:e,includePost:t,fallbackPostsResolved:r,videos:s})=>{let a=e;if(t&&(a=[t].concat(a)),a=a.filter((e=>!e.isVideo)),a=a.slice(0,v),a.length<v){const e=(r||await b()).filter((({id:e})=>!a.some((t=>t.id===e)))).slice(0,v-a.length);a=a.concat(e)}return{posts:a,videos:s}}))},e.exports=t.default},tnQC:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,a=(s=r("/RfE"))&&s.__esModule?s:{default:s};class n{constructor(e){this.curr=e.curr,this.next=e.next,this.prev=e.prev,this.total=e.total}static fromJSON(e){return new n({total:Number(e.total||0),curr:e.curr?a.default.fromJSON(e.curr):null,next:e.next?a.default.fromJSON(e.next):null,prev:e.prev?a.default.fromJSON(e.prev):null})}toJSON(){return{total:this.total,curr:this.curr?this.curr.toJSON():null,next:this.next?this.next.toJSON():null,prev:this.prev?this.prev.toJSON():null}}hasMore(){return null!==this.next}}t.default=n,e.exports=t.default},tsyB:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(r("f8ne")),a=n(r("2rXV"));function n(e){return e&&e.__esModule?e:{default:e}}const o=new(n(r("Rsny")).default)("kinja:fetch"),i=/token=[^&#]*/;var u=async(e,t,r)=>{e.match(i)&&o.warning(`Removed token in query. Use Authorization header instead. Requested url: ${e}`);const n=e.replace(i,"");o.info(`posting to ${n}`);const u=r||{};let l;try{const{headers:e,token:r,...o}=u,i={...o,method:"POST",body:u.formData?t:JSON.stringify(t),headers:e||{}};i.headers={...i.headers,Accept:"application/json"},s.default.isBrowser||(i.headers={...i.headers,"User-Agent":"kinja-magma"}),u.formData||(i.headers={...i.headers,"Content-Type":"application/json"}),r&&(i.headers={...i.headers,Authorization:`Bearer ${r}`}),s.default.isDev&&delete i.headers.cookies;const d=await(0,a.default)(n,i);l=await d.json()}catch(e){throw e}if(l.meta&&l.meta.error)throw l.meta.error;return void 0!==l.data?l.data:l};t.default=u,e.exports=t.default}}]);