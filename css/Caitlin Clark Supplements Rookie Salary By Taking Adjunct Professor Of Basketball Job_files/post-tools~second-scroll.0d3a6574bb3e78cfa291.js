(window.webpackJsonp=window.webpackJsonp||[]).push([["post-tools~second-scroll","newspicks","userState"],{"4IKe":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,o,t,a){if(t&&t.isSuperuser&&a)return{canEdit:!0,canEmbiggen:!0,canPromote:!0,canSendToEditors:!0,canShare:!0,canUnshare:Boolean(e.sharedToBlogId),canDismiss:!0,canBlock:!0};const r=o&&t&&t.hasRoleOnBlog("ADMIN",o.id),n=t&&e.authorIds&&-1!==e.authorIds.indexOf(t.id),d=o&&t&&t.hasRoleOnBlog("OWNER",o.id),s=Boolean(r||d||n),i=t&&t.hasRoleOnBlog("ADMIN",e.defaultBlogId),l=t&&e.parentAuthorId===t.id,c=Boolean(!n&&(i||l)),p=Boolean(!n&&i);return{canEdit:s,canEmbiggen:s,canPromote:!!t&&t.isSales,canSendToEditors:!!o&&(Boolean(o.freelancerDraftEmail)&&"DRAFT"===e.status),canShare:Boolean(t),canUnshare:Boolean(t&&e.sharedToBlogId&&t.hasRoleOnBlog("ADMIN",e.sharedToBlogId)),canDismiss:c,canBlock:p}},e.exports=o.default},NBZd:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=d(t("f8ne")),r=d(t("Oyao")),n=d(t("tsyB"));function d(e){return e&&e.__esModule?e:{default:e}}const s={error:{code:"DUMMY_TOKEN_ERROR",message:"Token returned was a dummy token",uid:""}},i={credentials:"include"},l=e=>()=>Promise.resolve(e),c=()=>Promise.resolve(r.default.get("KinjaToken")||"");var p={asGetter:l,asKinjaTokenGetter:e=>()=>Promise.resolve({type:"USER_TOKEN",value:e}),existing:c,fresh:()=>(0,n.default)(`${a.default.api.profileSessionUrl}token/create`,{},i).then((e=>e.token)),get:(e=c,o)=>e().then((e=>{if(o&&-1!==e.indexOf("dummy-"))throw new Error(s);return e})),newspicksFresh:()=>(0,n.default)(`${a.default.api.profileUrl}token/create`,{},i).then((e=>e.token)),toKinjaTokenGetter:e=>()=>e().then((e=>({type:"USER_TOKEN",value:e}))),toUserTokenGetter:e=>e().then((e=>{if("USER_TOKEN"!==e.type)throw new Error(`Unsupported token type - ${e.type}`);return l(e.value)}))};o.default=p,e.exports=o.default},RK8k:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,o,a,s,l){if(!a&&!o)return{};const{postId:p,postPermalink:g,isVideo:m,isFeatured:P,parentId:f}=e,h=Boolean(a&&a.isSuperuser&&l),b=o?o.locale:r.defaultLocale,{canEdit:C,canEmbiggen:y,canPromote:v,canSendToEditors:E,canShare:k,canUnshare:w,canDismiss:I,canBlock:T}=(0,i.default)(e,o,a,l),B=u(s,g),S=()=>{const e=h?"?superuser":"";B("Edit post"),(0,d.openUrlWithWindow)(`${c}write/${p}${e}`,"_self")},R=e=>{B("Embiggen post"),Promise.all([t.e("biztoolsPage~channelSectionPage~curatedPostsPage~embiggen~fromGoMedia~frontPage~getRecommendedPosts~~1fb6271e"),t.e("embiggen")]).then(t.t.bind(null,"qwg4",7)).then((e=>e.embiggen)).then((o=>o(p,e)))},z=()=>{B("Send to editors"),Promise.all([t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~animatedBlogLogo~biztools~blog-avat~049d702c"),t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~cel~964e7990"),t.e("vendor~PlaylistCarousels~biztools~capPage~capRoundupPage~celebrityPage~commerceDashboard~curatedPage~8d218f23"),t.e("vendor~curatedHomepage~frontPage~modify-commerce-links~renderSlideshowBlockNode~searchPage~send-to-e~ecb5f117"),t.e("PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~commentsIf~18a437f7"),t.e("PlaylistCarousels~adEditorComponent~adEditorPageComponent~curatedPageEditor~exit-intent-form~feature~8366ebaf"),t.e("biztoolsPage~channelSectionPage~curatedPostsPage~embiggen~fromGoMedia~frontPage~getRecommendedPosts~~1fb6271e"),t.e("adEditorComponent~commentsIframe~curated-homepage-editor~expandable-container~follow-controls~footer~d02a2274"),t.e("adEditorComponent~adEditorPageComponent~featureSwitchPageClient~in-article-selector~login~modal~rend~9dcdd7f7"),t.e("send-to-editors")]).then(t.t.bind(null,"exDB",7)).then((e=>e.renderSendToEditorsForm)).then((o=>o(e.wordCount,p)))},D=()=>{B("Promote"),(0,d.openUrlWithWindow)(`${c}dfp/promotions/${p}`)},O=e=>{B("Dismiss"),Promise.all([t.e("vendor~curatedPageEditor~dismiss~getRecommendedPosts~liveblog-controls~more-below-post~more-below-po~f93541a3"),t.e("dismiss")]).then(t.t.bind(null,"C38K",7)).then((e=>e.dismiss)).then((o=>o(p,e)))},_=({userId:e,blogId:o,userName:a,blogName:r,isBlocked:n})=>{B("Block"),t.e("block").then(t.t.bind(null,"08lX",7)).then((e=>e.block)).then((t=>t({postId:p,userId:e,blogId:o,userName:a,blogName:r,isBlocked:n})))};if("profilepage"===s)return{dismissClickHandler:f&&I?O:void 0,blockClickHandler:f&&T?_:void 0};if((0,n.isLegacyFrontPage)(s))return{dropdownClickHandler:()=>B(null),editClickHandler:C?S:void 0,embiggenClickHandler:y?R:void 0,sendToEditorsClickHandler:E?z:void 0,promoteClickHandler:v?D:void 0};if("permalink"===s){const a=e=>()=>{B("Unshare"),Promise.all([t.e("biztoolsPage~channelSectionPage~curatedPostsPage~embiggen~fromGoMedia~frontPage~getRecommendedPosts~~1fb6271e"),t.e("unshare")]).then(t.t.bind(null,"/7UF",7)).then((e=>e.unshare)).then((o=>o(p,[e.id])))},r=o=>()=>{B("Share on Kinja click"),Promise.all([t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~animatedBlogLogo~biztools~blog-avat~049d702c"),t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~cel~964e7990"),t.e("vendor~PlaylistCarousels~adEditorComponent~biztools~capPage~capRoundupPage~celebrityPage~commentsIfr~03147cd6"),t.e("vendor~PlaylistCarousels~adEditor~biztools~capPage~capRoundupPage~celebrityPage~commerceDashboard~cu~976f26e2"),t.e("vendor~PlaylistCarousels~adEditorComponent~biztools~capPage~capRoundupPage~celebrityPage~commerceDas~decba093"),t.e("vendor~PlaylistCarousels~biztools~capPage~capRoundupPage~celebrityPage~commerceDashboard~curatedPage~8d218f23"),t.e("vendor~celebrityPage~curated-homepage-editor~hydrateFiveCardCarouselBlock~hydrateSearchPageList~list~432f53a4"),t.e("vendor~PlaylistCarousels~celebrityPage~curated-homepage-editor~hydrateFiveCardCarouselBlock~hydrateS~a6b6960f"),t.e("vendor~celebrityPage~curated-homepage-editor~hydrateFiveCardCarouselBlock~hydrateSearchPageList~lunc~34ae3c1e"),t.e("vendor~celebrityPage~curated-homepage-editor~hydrateFiveCardCarouselBlock~hydrateSearchPageList~lunc~28f52164"),t.e("vendor~curated-homepage-editor~hydrateFiveCardCarouselBlock~hydrateSearchPageList~lunchbox-read-only~cbbfa5af"),t.e("vendor~commerceDashboard~login~notification~render-custom-header~second-scroll-container~special-sec~e51224db"),t.e("vendor~hydrateSearchPageList~special-sections-editor~splice-editor~videoAdminPage~videoPlaylistDetailPage"),t.e("vendor~hydrateSearchPageList~splice-editor~videoAdminPage~videoPlaylistDetailPage"),t.e("vendor~splice-editor~videoAdminPage~videoPlaylistDetailPage"),t.e("PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~commentsIf~18a437f7"),t.e("PlaylistCarousels~adEditorComponent~adEditorPageComponent~curatedPageEditor~exit-intent-form~feature~8366ebaf"),t.e("PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~conversation-button~curatedPageEd~a5ef0a83"),t.e("PlaylistCarousels~adEditorComponent~biztools~curatedPageEditor~expandable-container~hydrateSearchPag~88a052b7"),t.e("splice-editor")]).then(t.t.bind(null,"KUXs",7)).then((e=>e.renderSpliceEditor)).then((t=>t(e,o)))},n=()=>{B("Change in-article video"),Promise.all([t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~animatedBlogLogo~biztools~blog-avat~049d702c"),t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~cel~964e7990"),t.e("vendor~PlaylistCarousels~adEditorComponent~biztools~capPage~capRoundupPage~celebrityPage~commentsIfr~03147cd6"),t.e("vendor~PlaylistCarousels~adEditor~biztools~capPage~capRoundupPage~celebrityPage~commerceDashboard~cu~976f26e2"),t.e("vendor~PlaylistCarousels~adEditorComponent~biztools~capPage~capRoundupPage~celebrityPage~commerceDas~decba093"),t.e("vendor~in-article-selector"),t.e("PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~commentsIf~18a437f7"),t.e("PlaylistCarousels~adEditorComponent~adEditorPageComponent~curatedPageEditor~exit-intent-form~feature~8366ebaf"),t.e("PlaylistCarousels~adEditorComponent~biztools~curatedPageEditor~expandable-container~hydrateSearchPag~88a052b7"),t.e("PlaylistCarousels~adEditorComponent~biztools~curatedPageEditor~curatedPostsPage~exit-intent-form~fea~7393a0a3"),t.e("PlaylistCarousels~biztools~blog-avatars~curatedPageEditor~exit-intent-form~footer~in-article-selecto~af078761"),t.e("PlaylistCarousels~adEditorComponent~biztools~curatedPageEditor~expandable-container~image~in-article~c4cf25e4"),t.e("PlaylistCarousels~adEditorComponent~biztools~expandable-container~image~in-article-selector~liveblog~1e35dea9"),t.e("biztoolsPage~channelSectionPage~curatedPostsPage~embiggen~fromGoMedia~frontPage~getRecommendedPosts~~1fb6271e"),t.e("adEditorComponent~commentsIframe~curated-homepage-editor~expandable-container~follow-controls~footer~d02a2274"),t.e("adEditorComponent~adEditorPageComponent~featureSwitchPageClient~in-article-selector~login~modal~rend~9dcdd7f7"),t.e("adEditorComponent~api-video-meta~getRelatedStoriesPosts~getShowBrowserData~in-article-selector~secon~d40bb968"),t.e("curated-homepage-editor~in-article-selector~nextVideoRender~renderFloatingBottomVideo~video-html5-playlist"),t.e("curated-homepage-editor~in-article-selector"),t.e("in-article-selector")]).then(t.t.bind(null,"hfn1",7)).then((e=>e.default)).then((e=>e(p,b)))},d=()=>{o&&Promise.all([t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~animatedBlogLogo~biztools~blog-avat~049d702c"),t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~cel~964e7990"),t.e("vendor~adEditor~biztoolsPage~capPage~capRoundupPage~celebrityPage~commerceDashboard~copy-to-clipboar~8f2d0ae3"),t.e("vendor~curatedPageEditor~dismiss~getRecommendedPosts~liveblog-controls~more-below-post~more-below-po~f93541a3"),t.e("PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~commentsIf~18a437f7"),t.e("qanda-controls")]).then(t.t.bind(null,"OU6v",7)).then((e=>e.default)).then((e=>e({blog:o,postId:p,scrollToComponent:!0})))},s=(C||h)&&o&&"default"!==o.blogGroup&&!m&&!P;return{dropdownClickHandler:()=>B(null),editClickHandler:C?S:void 0,embiggenClickHandler:y?R:void 0,sendToEditorsClickHandler:E?z:void 0,promoteClickHandler:v?D:void 0,unshareClickHandler:w&&o?a(o):void 0,shareClickHandler:k&&o?r(o):void 0,changeInArticleVideoClickHandler:!C||m||P?void 0:n,toggleConversationToolsClickHandler:s?d:void 0}}};var a=l(t("f8ne")),r=t("TiJv"),n=t("tKNw"),d=t("zHr9"),s=t("bq3m"),i=l(t("4IKe"));function l(e){return e&&e.__esModule?e:{default:e}}const c=a.default.kinjaUrl+"/",p={permalink:"Permalink meta",frontpage:"Front page click"},u=(e,o)=>t=>(0,s.sendGa360Event)({category:p[e],action:`Drop down ${t?`- ${t} `:""}click`,label:o});e.exports=o.default},TrPc:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.hydratePostTools=function({blog:e,pageType:o}){m.blog=e,m.pageType=o,d.default.subscribe(((e,o)=>m.onAuthStateChange(e,o)),!0)},o.postToolsHelper=void 0;var a=function(e,o){if(!o&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c(o);if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var d=r?Object.getOwnPropertyDescriptor(e,n):null;d&&(d.get||d.set)?Object.defineProperty(a,n,d):a[n]=e[n]}a.default=e,t&&t.set(e,a);return a}(t("mXGw")),r=l(t("xARA")),n=t("lI4E"),d=l(t("OxGi")),s=l(t("RK8k")),i=t("9YsU");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var o=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:o})(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},p.apply(this,arguments)}const{features:u}=i.renderData;const g=Array.from(document.querySelectorAll(".post-tools-wrapper")),m=new class{constructor({postToolsWrappers:e}){this.postToolsDataContainer=new Map,this.postToolsWrappers=e}updatePostToolsData(e,o,t=(e=>e)){if(this.postToolsDataContainer.has(e)){const a=this.postToolsDataContainer.get(e);this.postToolsDataContainer.set(e,t({...a,...o}))}}postIdFrom(e){const o=e.getAttribute("data-post-id");return o?(0,n.createPostId)(o):null}postToolsDataFrom(e){const o=JSON.parse(e);return{type:"permalink"===o.type?"permalink":"stream",postId:(0,n.createPostId)(o.postId),authorIds:Array.from(o.authorIds).map((e=>(0,n.createUserId)(e))),sharedToBlogId:o.sharedToBlogId?(0,n.createBlogId)(o.sharedToBlogId):void 0,status:o.status,postPermalink:o.postPermalink,wordCount:parseInt(o.wordCount)||0,isFeatured:Boolean(o.isFeatured),isVideo:Boolean(o.isVideo),isEmbiggened:Boolean(o.isEmbiggened),index:parseInt(o.index)||0,pageType:o.pageType,views:parseInt(o.views)||0,hideRecommendations:Boolean(o.hideRecommendations)||!1,isSecondScroll:Boolean(o.isSecondScroll)||!1,parentId:o.parentId?(0,n.createPostId)(o.parentId):void 0,parentAuthorId:o.parentAuthorId?(0,n.createUserId)(o.parentAuthorId):void 0,defaultBlogId:(0,n.createBlogId)(o.defaultBlogId),isDismissed:!1,isBlocked:!1}}setPostToolsData(){this.postToolsDataContainer.clear(),this.postToolsWrappers=Array.from(document.querySelectorAll(".post-tools-wrapper")),this.postToolsWrappers.forEach((e=>{const o=this.postToolsDataFrom(e.getAttribute("data-state")||"{}"),t=o.postId;t&&this.postToolsDataContainer.set(t,o)}))}onAuthStateChange(e,o){o&&o.state===e.state&&o.user===e.user||("authd"===e.state&&e.user&&(this.user=e.user),this.setPostToolsData(),this.renderForAllPosts())}renderForAllPosts(){this.postToolsWrappers.forEach((e=>{const o=this.postIdFrom(e);if(o)return this.renderForOnePost({postId:o,postToolsWrapper:e})}))}renderForOnePost({postId:e,postToolsWrapper:o}){let n;const d=this.postToolsDataContainer.get(e),i=u&&u.superuser;if(d&&(n=(0,s.default)(d,this.blog,this.user,this.pageType,i)),o&&d&&n){Object.values(n).filter(Boolean).length>1&&Promise.all([Promise.all([t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~animatedBlogLogo~biztools~blog-avat~049d702c"),t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~cel~964e7990"),t.e("vendor~adEditor~biztoolsPage~capPage~capRoundupPage~celebrityPage~commerceDashboard~copy-to-clipboar~8f2d0ae3"),t.e("vendor~celebrityPage~channelSectionPage~curatedHomepage~frontPage~gamePage~moviePage~post-tools~prof~df023a5f"),t.e("PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~commentsIf~18a437f7"),t.e("biztools~channelSectionPage~curatedHomepage~curatedPostsPage~frontPage~gamePage~getRecommendedPosts~~a53e17ca"),t.e("channelSectionPage~curatedHomepage~frontPage~gamePage~newspicks~post-tools~profilePage~regwalled-con~17322d89"),t.e("channelSectionPage~curatedHomepage~gamePage~post-tools~profilePage~renderCommentsIframe~renderCommen~bf9c3c43"),t.e("get-dropdown-contents~post-tools~render-curation-dropdowns~render-custom-header-tertiary-links~rende~01435056"),t.e("curated-homepage-editor~get-dropdown-contents~post-tools"),t.e("post-tools~second-scroll"),t.e("post-tools")]).then(t.t.bind(null,"8eBy",7)),Promise.all([t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~animatedBlogLogo~biztools~blog-avat~049d702c"),t.e("vendor~PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~cel~964e7990"),t.e("PlaylistCarousels~adEditorComponent~adEditorPageComponent~biztools~capPage~capRoundupPage~commentsIf~18a437f7"),t.e("get-dropdown-contents~post-tools~render-curation-dropdowns~render-custom-header-tertiary-links~rende~01435056"),t.e("curated-homepage-editor~get-dropdown-contents~post-tools"),t.e("get-dropdown-contents")]).then(t.t.bind(null,"fztQ",7))]).then((([e,t])=>{if(n){const{PostTools:s}=e,i=(0,t.default)(d,n,this.pageType,this.user,this.blog);r.default.render(a.createElement(s,p({},d,{dropdownClickHandler:n.dropdownClickHandler,dropdownContents:i})),o)}}))}}}({postToolsWrappers:g});o.postToolsHelper=m},tKNw:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.isLegacyFrontPage=void 0;o.isLegacyFrontPage=e=>-1!==["frontpage","latest"].indexOf(e)},tsyB:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=n(t("f8ne")),r=n(t("2rXV"));function n(e){return e&&e.__esModule?e:{default:e}}const d=new(n(t("Rsny")).default)("kinja:fetch"),s=/token=[^&#]*/;var i=async(e,o,t)=>{e.match(s)&&d.warning(`Removed token in query. Use Authorization header instead. Requested url: ${e}`);const n=e.replace(s,"");d.info(`posting to ${n}`);const i=t||{};let l;try{const{headers:e,token:t,...d}=i,s={...d,method:"POST",body:i.formData?o:JSON.stringify(o),headers:e||{}};s.headers={...s.headers,Accept:"application/json"},a.default.isBrowser||(s.headers={...s.headers,"User-Agent":"kinja-magma"}),i.formData||(s.headers={...s.headers,"Content-Type":"application/json"}),t&&(s.headers={...s.headers,Authorization:`Bearer ${t}`}),a.default.isDev&&delete s.headers.cookies;const c=await(0,r.default)(n,s);l=await c.json()}catch(e){throw e}if(l.meta&&l.meta.error)throw l.meta.error;return void 0!==l.data?l.data:l};o.default=i,e.exports=o.default},zHr9:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.cachebustUrl=function(e){const o=e.replace(/[&?]rev=\d*/g,""),t=-1===o.indexOf("?")?"?":"&";return o+t+"rev="+String(Date.now())},o.openUrlWithWindow=void 0;o.openUrlWithWindow=(e,o="_blank")=>{window.open(`${e}`,o).focus()}}}]);