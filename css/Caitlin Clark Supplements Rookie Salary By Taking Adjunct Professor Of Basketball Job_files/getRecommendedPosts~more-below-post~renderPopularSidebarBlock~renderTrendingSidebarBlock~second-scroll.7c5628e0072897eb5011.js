(window.webpackJsonp=window.webpackJsonp||[]).push([["getRecommendedPosts~more-below-post~renderPopularSidebarBlock~renderTrendingSidebarBlock~second-scroll"],{HGHY:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o("lI4E"),l=n(o("kP+l")),r=n(o("skmR")),i=o("5fcu"),s=o("Awke"),d=o("wS5R");function n(e){return e&&e.__esModule?e:{default:e}}class u{constructor(e){Object.assign(this,e),this.originalProps=e}get authorName(){return this.authorNameOrByline}get securePermalink(){return this.permalink.replace("http://","https://")}static fromPost(e,t,o,a){const r=e.safeHeadline||e.plainTextExcerpt;let i=e.calculatedSharingMainImage&&e.calculatedSharingMainImage.asImage();if(!i){const t=(0,s.findBlockNodeJSONByType)(e.body,"Image");t&&(i=l.default.fromJSON(t))}const n=e.showByline&&e.byline||o&&o.length&&o[0].displayName||"",f=e.showByline&&e.byline?null:e.authorId,c=t.avatar;return new u({id:e.id,headline:r,permalink:e.permalink,image:i,authorId:f,authorNameOrByline:n,authorScreenName:e.showByline&&o&&o.length?o[0].screenName:void 0,defaultBlogId:t.id,defaultBlogDisplayName:t.displayName,defaultBlogHost:t.canonicalHost,defaultBlogGroup:t.blogGroup,defaultBlogRecircGroup:t.properties&&t.properties.recircGroup,plainText:(0,d.getPostExcerptAsPlainText)(e),score:0,publishTimeMillis:e.publishTimeMillis||0,modifiedTimeMillis:e.modifiedTimeMillis||null,defaultBlogAvatar:c,defaultBlogLogo:t.logo,isVideo:e.isVideo,replyCount:a,amazonPrice:e.amazonPrice,amazonPromoCode:e.amazonPromoCode,featuredMedia:e.featuredMedia,translatedFrom:e.translatedFrom,showByline:e.showByline})}static toJSON(e){return{id:e.id,headline:e.headline,permalink:e.permalink,authorId:e.authorId,authorNameOrByline:e.authorNameOrByline,defaultBlogId:e.defaultBlogId,defaultBlogDisplayName:e.defaultBlogDisplayName,defaultBlogHost:e.defaultBlogHost,defaultBlogGroup:e.defaultBlogGroup||void 0,defaultBlogRecircGroup:e.defaultBlogRecircGroup||void 0,plaintext:e.plaintext,authorScreenName:e.authorScreenName,score:e.score,publishTimeMillis:e.publishTimeMillis,modifiedTimeMillis:e.modifiedTimeMillis,replyCount:e.replyCount,image:e.image?e.image.toJSON():void 0,securePermalink:e.securePermalink,authorName:e.authorNameOrByline,defaultBlogAvatar:e.defaultBlogAvatar?e.defaultBlogAvatar.toJSON():null,defaultBlogLogo:e.defaultBlogLogo?e.defaultBlogLogo.toJSON():null,isVideo:e.isVideo,amazonPrice:e.amazonPrice,amazonPromoCode:e.amazonPromoCode,featuredMedia:e.featuredMedia,translatedFrom:e.translatedFrom,showByline:e.showByline}}static fromJSON(e){return new u({id:(0,a.createPostId)(e.id),headline:(0,i.sanitizeHeadline)(e.headline),permalink:e.permalink,image:e.image?l.default.fromJSON(e.image):null,authorId:e.authorId?(0,a.createUserId)(e.authorId):null,authorNameOrByline:e.authorNameOrByline,defaultBlogId:(0,a.createBlogId)(e.defaultBlogId),defaultBlogDisplayName:e.defaultBlogDisplayName,defaultBlogHost:e.defaultBlogHost,defaultBlogGroup:e.defaultBlogGroup,defaultBlogRecircGroup:e.defaultBlogRecircGroup,plaintext:e.plaintext,authorScreenName:e.authorScreenName,score:e.score,publishTimeMillis:e.publishTimeMillis,modifiedTimeMillis:e.modifiedTimeMillis,defaultBlogAvatar:e.defaultBlogAvatar?r.default.fromJSON(e.defaultBlogAvatar):null,defaultBlogLogo:e.defaultBlogLogo?r.default.fromJSON(e.defaultBlogLogo):null,replyCount:e.replyCount,isVideo:e.isVideo,amazonPrice:e.amazonPrice,amazonPromoCode:e.amazonPromoCode,featuredMedia:e.featuredMedia,translatedFrom:e.translatedFrom?(0,a.createPostId)(e.translatedFrom):null,showByline:e.showByline})}clone(e){return new u({...this.originalProps,...e})}}t.default=u,e.exports=t.default},KINA:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o,r="id"){const i=(0,l.default)((0,a.default)(e.map(t)));if(0===i.length)return Promise.resolve({});return o(i).then((o=>e.reduce(((e,a)=>({...e,[String(a.id)]:t(a).map((e=>o.find((t=>t[r]===e)))).filter((e=>void 0!==e))})),{})))};var a=r(o("ZjZ4")),l=r(o("bAmA"));function r(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},M0jG:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTrendingMaxAge=void 0,t.getTrendingMaxAgeByBlog=function(e){return r[e]||l};var a=o("8DOO");const l=2592e6;t.defaultTrendingMaxAge=l;const r={[a.primaryBlogs.quartz.id]:2592e5}},Oygt:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.KEY_DELIMITER=void 0;t.KEY_DELIMITER="-";var a={client:()=>Promise.resolve(),get:()=>Promise.resolve(null),set:()=>Promise.resolve(),del:()=>Promise.resolve()};t.default=a},SoMj:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o("O1lG");var l=e=>(0,a.getBlogsAsLookup)(e.map((e=>e.defaultBlogId)));t.default=l,e.exports=t.default},Vemv:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=r(t);if(o&&o.has(e))return o.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=l?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}a.default=e,o&&o.set(e,a);return a}(o("Oygt"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(r=function(e){return e?o:t})(e)}const i=new(((a=o("Rsny"))&&a.__esModule?a:{default:a}).default)("kinja:cache");t.default=class{constructor(e){this.name=e.name,this.timeToLive=e.timeToLive||300,this.metrics=Boolean(e.metrics),this.model=e.model}get(e){return l.default.get(this.name+l.KEY_DELIMITER+e,this.metrics).then((e=>{if(!e)return null;try{return Array.isArray(e)?e.map(this.model.fromJSON):this.model.fromJSON(e)}catch(e){return i.warning(`Failed to parse cache data at key '${this.name}'`),null}}))}set(e,t){if(Array.isArray(t))return l.default.set(this.name+l.KEY_DELIMITER+e,t.map(this.model.toJSON),this.metrics,this.timeToLive);l.default.set(this.name+l.KEY_DELIMITER+e,this.model.toJSON(t),this.metrics,this.timeToLive)}},e.exports=t.default},"XH+q":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,l=o("O1lG"),r=(a=o("KINA"))&&a.__esModule?a:{default:a};var i=e=>(0,r.default)(e,(e=>e.allAuthorIds),l.getBatchedUsers);t.default=i,e.exports=t.default},YXyR:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.threadUntil=t.setDiscussion=t.removeDismissReply=t.getReplyCounts=t.getDiscussions=t.getBatchedReplyCounts=t.dismissReply=void 0;var a=m(o("f8ne")),l=m(o("NWgQ")),r=m(o("kMn2")),i=m(o("HVn3")),s=m(o("bAmA")),d=m(o("5nUJ")),n=m(o("yK+w")),u=(m(o("tnQC")),m(o("NBZd"))),f=m(o("DI1U")),c=m(o("tsyB"));function m(e){return e&&e.__esModule?e:{default:e}}const g=a.default.api.commentsUrl,p=e=>e.length>0?(0,f.default)(`${g}views/replyCount?${l.default.stringify({ids:(0,s.default)(e)})}`):Promise.resolve({});t.getReplyCounts=p;t.getBatchedReplyCounts=e=>e.length>0?Promise.all((0,r.default)(e,100).map(p)).then((e=>(0,i.default)(...e))):Promise.resolve({});t.getDiscussions=e=>(0,f.default)(`${g}views/discussions?${l.default.stringify({postId:e})}`).then((e=>e.map((e=>d.default.fromJSON(e)))));t.setDiscussion=e=>u.default.get(u.default.fresh).then((t=>(0,c.default)(`${g}discussion`,e,{token:t})));t.dismissReply=e=>u.default.get(u.default.fresh).then((t=>(0,c.default)(`${g}dismiss/dismiss`,{postId:e},{token:t}))).then((e=>n.default.fromJSON(e)));t.removeDismissReply=e=>u.default.get(u.default.fresh).then((t=>(0,c.default)(`${g}dismiss/removeDismiss`,{postId:e},{token:t})));t.threadUntil=e=>(0,f.default)(`${g}qa/threadUntil/${e}`)},waOh:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deRankOldPosts=function(e,t){const o=new Date-t,a=e.reduce(((e,t)=>(!function(e,t){const o=e.modifiedTimeMillis||e.publishTimeMillis||0;return t<=o}(t,o)?e.oldPosts.push(t):e.newPosts.push(t),e)),{newPosts:[],oldPosts:[]});return a.newPosts.concat(a.oldPosts)}},"yK+w":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o("lI4E");class l{constructor(e){this.authorId=e.authorId,this.createTimeMillis=e.createTimeMillis,this.postId=e.postId,this.starterId=e.starterId,this.userId=e.userId}static fromJSON(e){return new l({createTimeMillis:e.createTimeMillis,postId:(0,a.createPostId)(e.postId),starterId:(0,a.createPostId)(e.starterId),userId:(0,a.createUserId)(e.userId),authorId:(0,a.createUserId)(e.authorId)})}}t.default=l,e.exports=t.default},yOsc:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPopularSidebarPostsForBlog=async function({blogId:e,excludedPosts:t=[],requireHeadline:o=!1,language:a}){return y({blogIds:[e],maxAge:(0,g.getTrendingMaxAgeByBlog)(e),excludedPosts:t,requireHeadline:o,language:a})},t.getPopularSidebarPostsForBlogs=y;var a=p(o("bAmA")),l=p(o("Vemv")),r=(p(o("OAzy")),p(o("HGHY"))),i=o("YXyR"),s=o("wxvn"),d=o("vGmL"),n=p(o("ehbF")),u=o("waOh"),f=o("2m1d"),c=p(o("XH+q")),m=p(o("SoMj")),g=o("M0jG");function p(e){return e&&e.__esModule?e:{default:e}}const h=new l.default({name:"popularPostsForBlogs",model:r.default});async function y({blogIds:e,window:t=12,maxAge:o=g.defaultTrendingMaxAge,excludedPosts:l=[],requireHeadline:p=!1,language:y}){e.sort(),l.sort();const B=e.join(",")+"-"+l.join(",")+"-"+t,v=await h.get(B);if(v&&Array.isArray(v))return v;const P=(0,a.default)(e),I=(await(0,d.trendingPosts)({blogIds:P,past:`${t} minutes`,exclude:l,language:y}).catch((()=>[]))).map((({id:e})=>e)),M=(0,i.getReplyCounts)(I).catch((()=>[])),O=(0,s.getPosts)(I).catch((()=>[]));let w={},b=[];I.length>0&&await Promise.all([M,O]).then((([e,t])=>{w=e,b=t})),b=(0,u.deRankOldPosts)(b,o),b=b.filter((e=>!p||e.headline)).filter((e=>(0,f.filterForRecirc)(e)));const N=(0,m.default)(b).catch((()=>({}))),_=(0,c.default)(b).catch((()=>({})));return(0,n.default)({resolvedBlogs:N,resolvedAuthors:_}).then((({resolvedBlogs:e,resolvedAuthors:t})=>{const o=b.reduce(((o,a)=>{const l=e[a.defaultBlogId];if(!l)throw new Error("Missing defaultBlog in Blog lookup in getPopularSidebarPostsForBlogs");const i=r.default.fromPost(a,l,t[a.id],w[a.id]);return o.concat([i])}),[]);return h.set(B,o),o}))}}}]);