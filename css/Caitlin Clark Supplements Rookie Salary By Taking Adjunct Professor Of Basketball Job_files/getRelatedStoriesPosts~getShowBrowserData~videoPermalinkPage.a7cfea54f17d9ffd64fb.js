(window.webpackJsonp=window.webpackJsonp||[]).push([["getRelatedStoriesPosts~getShowBrowserData~videoPermalinkPage"],{"3yWB":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePlaylist=t.getPlaylists=t.getPlaylistById=t.createPlaylist=void 0;var s=u(i("f8ne")),a=u(i("NWgQ")),o=(u(i("rxqt")),u(i("SDc5"))),r=u(i("NBZd")),n=i("VHhN"),l=u(i("DI1U")),d=u(i("tsyB"));function u(e){return e&&e.__esModule?e:{default:e}}const c=s.default.api.videouploadUrl;t.getPlaylists=e=>(0,l.default)(`${c}playlist${e?`?cb=${Date.now()}`:""}`);t.getPlaylistById=({playlistId:e,blogId:t,resolveItems:i=!1,resolvePosts:s=!1,videoPermalinksOnly:r=!0,cacheBuster:d=!1})=>(0,l.default)(`${c}playlist/${e}?${a.default.stringify({resolveItems:i})}${d?`&cb=${Date.now()}`:""}`).then((({items:e,...i})=>s?(0,n.getLastEmbeddingPosts)({videoIds:e.map((e=>e.videoId)),blogId:t||void 0,videoPermalinksOnly:r}).then((t=>({...i,items:e.map((e=>({...e,videoMeta:{...e.videoMeta,posts:t.filter((t=>t.videoId===e.videoId))}})))}))):{...i,items:e})).then(o.default.fromJSON);t.createPlaylist=(e,t=r.default.existing)=>t().then((t=>(0,d.default)(`${c}playlist/create`,{name:e},{token:t})));t.updatePlaylist=(e,{items:t,shuffleOrder:i},s=r.default.existing)=>s().then((s=>(0,d.default)(`${c}playlist/updateItems`,{id:e,items:t,shuffleOrder:i},{token:s})))},"9B7T":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareVeritasTags=t.prepareRefinitivTags=t.getPrimaryTagNames=t.default=void 0;var s=o(i("MNu8")),a=o(i("7LJO"));function o(e){return e&&e.__esModule?e:{default:e}}const r=["article","articles","jews","anti-chinese sentiment","atlanta spa shootings","human sexuality","suicidal ideation","hatred","blaq son","given names","animal sexuality","reproduction","bird breeding","rape","branches of biology","american television series","child grooming","child pornography","sexual assault","palestinian terrorism","Apes"],n=(e,t)=>{const i=(e,t,i=1)=>e&&e.length>0?t:i,s=({score:e,position:t})=>{if(!t)return e;const{inHeadline:s,inBody:a}=t;return(e+i(s,1,0)+i(a,0,0))*i(s,1)*i(a,1)},o=[...e.topics.filter((({score:e})=>e>=0)).map((e=>({name:e.name,type:"topics",score:0*s(e)}))),...e.socialTags.filter((({score:e})=>e>=0)).map((e=>({name:e.name,type:"socialTags",score:1*s(e)}))),...e.entities.filter((({score:e})=>e>=0)).filter((({confidencelevel:e})=>void 0===e||e>=.9)).map((e=>({name:e.name,type:"entities",score:1*s(e)})))].reduce(((e,{name:t,score:i})=>{const s=t.toLowerCase();return void 0===e[s]?e[s]={name:t,score:i}:e[s].score=Math.max(e[s].score,i),e}),{}),n=[];Object.keys(o).forEach((e=>n.push(o[e])));const l=(t||[]).map((e=>e.tag));return n.filter((({name:e})=>!(-1!==l.indexOf(e)))).filter((({score:e})=>e>=.01)).filter((({name:e})=>e.length<=35)).filter((({name:e})=>a.default.isAllowedString(e)&&!(-1!==r.indexOf(e.toLowerCase())))).sort(((e,t)=>e.score>t.score?-1:1))};t.prepareRefinitivTags=n;t.prepareVeritasTags=e=>Object.entries(e).reduce(((e,t)=>(e.push({name:t[0],score:Number(t[1])}),e)),[]).sort(((e,t)=>e.score>t.score?-1:1));t.getPrimaryTagNames=(e,t)=>(e&&n(e,t)||[]).map((({name:e})=>e));var l=(e,t)=>(e&&n(e,t)||[]).slice(0,4).map((({name:e})=>e)).map((e=>new s.default({canonical:e,urlName:e,displayName:e})));t.default=l},SDc5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,a=(s=i("rxqt"))&&s.__esModule?s:{default:s};class o{constructor(e){this.id=e.id,this.name=e.name,this.length=e.length,this.oldestVideo=e.oldestVideo,this.shuffleOrder=e.shuffleOrder,this.lastUpdated=e.lastUpdated,this.items=e.items}static fromJSON(e){return new o({id:e.id,name:e.name,length:e.length,oldestVideo:e.oldestVideo,shuffleOrder:e.shuffleOrder||!1,lastUpdated:e.lastUpdated,items:e.items.map(a.default.fromJSON)})}}t.default=o,e.exports=t.default},jrG2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPageVideos=void 0;(s=i("2pqj"))&&s.__esModule;var s,a=i("qJ8v"),o=i("3yWB"),r=i("VHhN"),n=i("yxSn"),l=i("9B7T");t.getPageVideos=async({usePlaylist:e,videoId:t,refinitivTags:i,blog:s,categorizationData:d,numberOfVideos:u=5,excludePostId:c,features:f})=>{let m=[];const p={resolvePosts:!0,blogId:null==s?void 0:s.id};let h={};const g=e=>(h=e.reduce(((e,t)=>({...e,[t.id]:t})),h),e),v=e=>(m=[...m,...e.map((({id:e})=>e)).filter((e=>!(-1!==m.indexOf(e))))],e),y=async()=>{const e=m.slice(0,u),t=e.filter((e=>!h[e]));return t.length>0&&await(0,a.fetchVideoMetaByIds)(t,!1,p).then(g),e.map((e=>h[e])).filter(Boolean)},I=e=>e.filter((({postData:e})=>e&&e.id.toString()!==(c||"").toString())),b=e=>e.then(I).then(v).then(g).catch((()=>[])),P=e=>{const t=e.filter((({score:e})=>e>.1)).map((({videoId:e})=>e));return(0,a.fetchVideoMetaByIds)(t,!1,p).then((e=>e.sort((0,n.sortByIndexArray)(t))))},M=Math.max(u,25);if(e){const e=d&&d.channel,t=e&&e.properties.playlistId||s&&s.properties.playlistId||void 0;if(t){const e=(0,o.getPlaylistById)({playlistId:t,blogId:(null==s?void 0:s.id)||void 0,resolveItems:!0,videoPermalinksOnly:Boolean(f.require_video_permalinks),resolvePosts:!0}).then((({items:e})=>e.map((({videoMeta:e})=>e)).filter(Boolean)));await b(e)}}if(t){const e=(0,r.getVideosByVideo)(t,Math.min(M,30)).then(P);await b(e)}if(m.length>=u)return y();const O=i?(0,l.prepareRefinitivTags)(i).slice(0,4).map((({name:e})=>e)):[];if(i&&O.length>0){const e=(0,r.getVideosByTags)(s&&s.id,O,Math.min(M,30)).then(P);await b(e)}if(m.length>=u)return y();if(s){const e=(0,a.searchVideoMeta)({blogIds:[s.id],maxReturned:M},p);await b(e)}if(m.length>=u)return y();if(s){const e=(0,r.getRecentVideos)(s.id,Math.min(M,15),!1);await b(e)}return y()}},rxqt:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,a=(s=i("Nlp3"))&&s.__esModule?s:{default:s};class o{constructor(e){this.videoId=e.videoId,this.length=e.length,this.publishedTimestamp=e.publishedTimestamp,this.videoMeta=e.videoMeta}static fromJSON(e){return new o({videoId:e.videoId,length:e.length,publishedTimestamp:e.publishedTimestamp,videoMeta:e.videoMeta?a.default.fromJSON(e.videoMeta):null})}}t.default=o,e.exports=t.default},yxSn:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortByIndexArray=void 0;var s=i("DKNM");t.sortByIndexArray=e=>(0,s.sortByNumberExtract)((({id:t})=>{const i=e.indexOf(t);return-1===i?i:e.length-i}))}}]);