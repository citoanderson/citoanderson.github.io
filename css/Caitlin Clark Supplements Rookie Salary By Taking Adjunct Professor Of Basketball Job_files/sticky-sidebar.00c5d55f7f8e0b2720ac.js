(window.webpackJsonp=window.webpackJsonp||[]).push([["sticky-sidebar"],{"5ZaV":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recalculateSidebarDynamicRailHeight=t.default=void 0;var o=a(i("8exm")),n=a(i("v+SS")),r=i("rkpQ"),s=i("9YsU");function a(e){return e&&e.__esModule?e:{default:e}}const{features:c}=s.renderData,d=(0,o.default)("debug_sticky"),l=e=>{d&&console.log("STICKY",e)},u=()=>{const e=document.querySelector(".taboola-container"),t=document.querySelector("#leftrail_dynamic_ad_wrapper"),i=document.getElementById("sidebar_wrapper"),o=document.querySelector(".sidebar-inner");if(e&&i&&t){const n=e.getBoundingClientRect().top,r=i.getBoundingClientRect().top,s=n+e.getBoundingClientRect().height-r-(o&&o.getBoundingClientRect().height||0);t.style.height=`${s}px`}};t.recalculateSidebarDynamicRailHeight=u;var g=()=>{const e=document.querySelector(".js_sidebar_sticky_container");if(e){const i=document.querySelector(".taboola-container");i&&(0,n.default)({targetElement:i,observerOptions:{threshold:0},callback:u,negativeCallback:u}),window.addEventListener("resize_sidebar",u);let o=e.offsetHeight;if(c.truncate_sidebar){if(!document.querySelector(".js_post-truncation-waypoint-hook")){const t=document.querySelector(".js_starterpost"),i=t&&t.offsetHeight||0;if(i>0){const t=document.getElementById("sidebar_wrapper");let n=t&&t.offsetHeight||0;if(t&&n>0){let e=0;const r=50,s=o=>!o.matches(".left-top-ad")&&(!!o.matches(".js_moreFromNetwork")||n-e>i+r&&(e+=o.clientHeight||0,o.remove(),n=t.offsetHeight||0,!0));let a=n<o;if(!a){const e=t.children;for(let t=e.length-1;t>=0;t--){const i=e[t];if(i.matches(".sidebar-inner"))break;if(!s(i)){a=!0;break}}}const c=document.querySelector(".sidebar-sticky-children");if(!a&&c){const e=c.children;for(let t=e.length-1;t>1;t--){if(!s(e[t])){a=!0;break}}}}o=e.offsetHeight}}}u();const s=t=>{e.setAttribute("data-stickiness",String(t)),e.style.height=`${o+t}px`},a=200,d="sticky-on";let g=!1;const f=(t="LEFT_TOP",new Promise((e=>{l("Watching Right1");const i=document.querySelector(`[data-ad-unit="${t}"]`);if(i){const t=()=>"empty"===i.getAttribute("data-ad-load-state")||null===i.getAttribute("data-ad-load-state");"viewed"===i.getAttribute("data-ad-view-state")?(l("Right1 is already viewable"),e(!0)):t()?(l("Right1 is already rendered empty"),e(!1)):(i.addEventListener("dfpSlotRenderEnded",(()=>{t()&&(l("Right1 is rendered empty"),e(!1))})),i.addEventListener("dfpImpressionViewable",(()=>{l("Right1 is viewable"),e(!0)})))}else e(!1)}))).then((()=>l("Watching Right1 completed"))),h=t=>{if(e.classList.toggle(d,t),t){if(l("ON"),g)return;g=!0,f.then((()=>{l("Sticky Right1 is OK");const e=document.querySelector(".sidebar-sticky"),t=e&&e.offsetTop>a?e.offsetTop:a;s(t)}))}else l("OFF"),g&&s(a)},b=document.getElementById("sidebar_wrapper");if(!b)return;const p=[...b.children].reduce(((e,t)=>e-(t.offsetHeight||0)),b.offsetHeight||0);s(Math.max(p,0));const m=document.createElement("div"),y=.1*((0,r.getClientHeight)()||0);m.classList.add("js_sidebar_sticky_sentinel"),m.setAttribute("style",`height: ${y}px; top: -${y}px;`),e.prepend(m);new IntersectionObserver((t=>{o=[...e.children].reduce(((e,t)=>e+t.clientHeight),0);for(const e of t){const t=e.boundingClientRect,i=e.rootBounds;t.bottom<i.top&&h(!0),t.bottom>=i.top&&t.bottom<i.bottom&&h(!1)}}),{rootMargin:`-${y}px`,threshold:[0]}).observe(m)}var t};t.default=g}}]);